
Live.SimpleImgShow=function(){this.config={showCnt:6,items:null,playRight:null,playLeft:null,curPage:0,disCss:"over",leftDisCss:null,rightDisCss:null,showImgOnInit:!0,defaultIndex:0,triggerEvent:"click",isPolish:!0,isLoopPlay:!1,onchange:null,changeDisplay:!0}},Live.SimpleImgShow.prototype={init:function(a){for(var b in a)this.config[b]=a[b];var c=this;this.config.playRight.attr("hideFocus","true"),this.config.playRight.bind(this.config.triggerEvent,function(a){QZFL.event.preventDefault(a),c.moveR()}),this.config.playLeft.attr("hideFocus","true"),this.config.playLeft.bind(this.config.triggerEvent,function(a){QZFL.event.preventDefault(a),c.moveL()}),this.config.defaultIndex>=0&&this.show(this.config.defaultIndex)},play:function(a){var b=0,c=0;if(0>a&&0==this.config.curPage){if(!this.config.isLoopPlay)return;b=(Math.ceil(this.config.items.size()/this.config.showCnt)-1)*this.config.showCnt,c=b+this.config.showCnt-1}if(a>0&&this.config.curPage==Math.ceil(this.config.items.size()/this.config.showCnt)-1){if(!this.config.isLoopPlay)return;b=a+this.config.curPage*this.config.showCnt,b>=this.config.items.size()&&(b-=this.config.items.size()),c=b+this.config.showCnt-1}0>a&&0==this.config.curPage||a>0&&this.config.curPage==Math.ceil(this.config.items.size()/this.config.showCnt)-1||(b=this.config.curPage*this.config.showCnt+a,c=(this.config.curPage+1)*this.config.showCnt+a-1),b=0>b?0:b,c=c>this.config.items.size()-1?this.config.items.size()-1:c,this.config.isPolish&&c-b+1<this.config.showCnt&&(b=b-(this.config.showCnt-(c-b))+1),this.showBySE(b,c,a)},showBySE:function(a,b,c){if(this.config.changeDisplay){var d="get";"function"!=typeof this.config.items.get(e).hide&&(d="eq");for(var e=a;b>=e;e++){var f=this.config.items[d](e);if(!f)return;if(this.config.showImgOnInit){var g=f.find("img");g.attr("src")||g.attr("src",g.attr("_src"))}f.show()}for(var e=0;a>e;e++)this.config.items[d](e).hide();for(var e=b+1,h=this.config.items.size();h>e;e++)this.config.items[d](e).hide()}c>0?this.config.curPage==Math.ceil(this.config.items.size()/this.config.showCnt)-1?this.config.curPage=0:this.config.curPage+=Math.floor(c/this.config.showCnt):0>c&&(0==this.config.curPage?this.config.curPage=Math.ceil(this.config.items.size()/this.config.showCnt)-1:this.config.curPage-=Math.floor(Math.abs(c)/this.config.showCnt)),this.config.isLoopPlay||this.setBtn(),"function"==typeof this.config.onchange&&this.config.onchange(a,b,this.config.curPage)},show:function(a){var b,c=0,d=0,e=this.config.items.size(),f=Math.ceil(e/this.config.showCnt);a>0&&a==f-1&&this.config.isPolish?(d=e-1,c=e-this.config.showCnt):(c=a*this.config.showCnt,d=c+this.config.showCnt-1),b=c-this.config.curPage*this.config.showCnt,this.showBySE(c,d,b)},moveR:function(){this.play(this.config.showCnt)},moveL:function(){this.play(-1*this.config.showCnt)},setBtn:function(){this.config.curPage<=0?this.config.playLeft.addClass(this.config.leftDisCss?this.config.leftDisCss:this.config.disCss):this.config.playLeft.removeClass(this.config.leftDisCss?this.config.leftDisCss:this.config.disCss),this.config.curPage==Math.ceil(this.config.items.size()/this.config.showCnt)-1?this.config.playRight.addClass(this.config.rightDisCss?this.config.rightDisCss:this.config.disCss):this.config.playRight.removeClass(this.config.rightDisCss?this.config.rightDisCss:this.config.disCss)}},Live.txv.FocusSlider=function(){this.colorCache={},this.conf={autoplay:!0,autoplayDur:3e3,modId:"mod_txv_focus",modShowPicId:"mod_txv_focus_showpic",modPrevShowPicId:"mod_txv_focus_prevpic",modTitle:"mod_txv_focus_title",curClass:"cur",modNav:"mod_txv_focus_nav",activeClass:"active",onChange:QZFL.emptyFn,wheretoaddActive:"",delay:200,fadeUpInterval:40,fadeCoverId:"fadecover",preLoadImgNum:2,supportTouch:"ontouchend"in document,touchCrossOverDegree:30,touchMinDistance:10},this.timer=null,this.curIndex=-1,this.hadLoad={0:!0},this._opacity=.9,this.fadeUpTimer=null,this.canPlay=!0},Live.txv.FocusSlider.prototype={rgbReg:/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,colorHex:function(a){var b,c,d,e,f;if(/^(rgb|RGB)/.test(a)){b=a.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),c="#";for(var e=0;e<b.length;e++){var g=Number(b[e]).toString(16);"0"===g&&(g+=g),c+=g}return 7!==c.length&&(c=a),c}if(!this.rgbReg.test(a))return a;if(d=a.replace(/#/,"").split(""),6===d.length)return a;if(3===d.length){for(f="#",e=0;e<d.length;e+=1)f+=d[e]+d[e];return f}},colorRgb:function(a,b){var c,d=a.toLowerCase(),e=[];if(d&&this.rgbReg.test(d)){if(4===d.length){c="#";for(var f=1;4>f;f+=1)c+=d.slice(f,f+1).concat(d.slice(f,f+1));d=c}for(var f=1;7>f;f+=2)e.push(parseInt("0x"+d.slice(f,f+2)));return void 0!==b?"rgba("+e.join(",")+","+b+")":"rgb("+e.join(",")+")"}return d},msColor:function(a,b){var c=Math.floor(Math.floor(100*b)/100*255).toString(16);return c.length<2&&(c="0"+c),a=a.replace(/#/,"#"+c)},rgbaTest:function(){var a=null;return function(){if("boolean"==typeof a)return a;var b=document.createElement("div"),c=b.style;return c.cssText="background-color:rgba(150,255,150,.5)",a=-1!==(""+c.backgroundColor).indexOf("rgba")}},init:function(a){QZFL.object.extend(this.conf,a),this.bindEvent(),this.conf.supportTouch&&this.bindTouchEvent(),this.isNeedCover()||QZFL.dom.removeElement(this.conf.fadeCoverId),this.starAutoPlay(0)},stop:function(){clearInterval(this.timer)},starAutoPlay:function(a){if(this.conf.autoplay){clearInterval(this.timer);var b=this;b.play(a),this.timer=setInterval(function(){var a=document.webkitHidden||document.mozHidden||document.mozHidden||document.msHidden;("boolean"!=typeof a||a===!1)&&b.play()},this.conf.autoplayDur)}},navItemHoverHandle:function(a){var b=$e("#"+this.conf.modNav),c=b.find("li").index(a);c!==this.curIndex&&(this.setCanPlay(!0),this.play(c))},bindEvent:function(){var a=this,b=$e("#"+this.conf.modId),c=null,d=null,e=!0,f=null;if(QZFL.lang.isString(this.conf.modId)&&0!=this.conf.modId.length){var g=$e("#"+this.conf.modNav);g.delegate("li","mouseover",function(){clearTimeout(d);var b=this;d=setTimeout(function(){a.navItemHoverHandle(b)},a.conf.delay)},!0),$e("#"+this.conf.modShowPicId).bind("webkitAnimationEnd",function(){QZFL.css.removeClassName(this.parentNode,a.conf.activeClass)}),b.onMouseEnter(function(){clearTimeout(c),a.stop()}),b.onMouseLeave(function(){clearTimeout(c),c=setTimeout(function(){a.starAutoPlay()},a.conf.autoplayDur)}),this.conf.supportTouch&&g.delegate("li","touchstart",function(){return e=!0,f=this,clearTimeout(c),a.stop(),!1}).delegate("li","touchmove",function(){return e=!1,!1}).delegate("li","touchend touchcancel",function(b){return clearTimeout(c),c=setTimeout(function(){a.starAutoPlay()},a.conf.autoplayDur),e&&(b.preventDefault(),b.stopPropagation(),a.navItemHoverHandle(f)),!1})}},bindTouchEvent:function(){function a(a){var c=a.originalEvent.touches[0];j.x=c.pageX,j.y=c.pageY,clearTimeout(i),d.stop(),e.bind("touchmove",b)}function b(a){var c=a.originalEvent.touches[0],f=c.pageX-j.x,h=j.y-c.pageY,i=180*Math.abs(Math.atan(h/f))/Math.PI,k=Math.sqrt(f*f+h*h);if(k>=d.conf.touchMinDistance){if(i>g)return!0;a.preventDefault(),a.stopPropagation(),0>f?d.play():f>0&&d.play(d.curIndex-1),e.unbind("touchmove",b)}}function c(){e.unbind("touchmove",b),clearTimeout(i),i=setTimeout(function(){d.starAutoPlay()},d.conf.autoplayDur)}var d=this,e=$e("#"+this.conf.modId),f=this.conf.supportTouch,g=this.conf.touchCrossOverDegree,h=this.conf.touchMinDistance,i=null,j={x:null,y:null};return"object"==typeof e&&f?(g&&"number"==typeof g||(g=30),h&&"number"==typeof h||(h=10),e.bind("touchstart",a),void e.bind("touchend touchcancel",c)):!1},isNeedCover:function(){return!(QZFL.userAgent.chrome||QZFL.userAgent.safari)},setCanPlay:function(a){this.canPlay=!!a},play:function(a){if(this.conf.wheretoaddActive&&this.conf.wheretoaddActive.removeClass(this.conf.activeClass),void 0==a&&(a=this.curIndex+1),a>=$e("#"+this.conf.modNav).find("li").size()?a=0:0>a&&(a=$e("#"+this.conf.modNav).find("li").size()-1),this.canPlay&&a!=this.curIndex){this.curIndex=a;var b,c=$j("#"+this.conf.modNav),d=this,e=c.find("li"),f=e.eq(a),g=f.find("a"),h=g.attr("data-color")||"#000000";this.hadLoad[a]?(e.removeClass(this.conf.curClass),f.addClass(this.conf.curClass),this.changeImg(g.attr("data-pic"),h)):(b=g.attr("data-pic"),this.loadImg(b,function(){e.removeClass(d.conf.curClass),f.addClass(d.conf.curClass),d.changeImg(b,h),d.hadLoad[a]=!0})),this.changeTitle(g.attr("href"),g.attr("title"),a),this.changeNavBgColor(h),QZFL.lang.isFunction(this.conf.onChange)&&this.conf.onChange(a),this.preLoadImg(a)}},changeImg:function(a,b){var c,d=$e("#"+this.conf.modShowPicId),e=$e("#"+this.conf.modPrevShowPicId),f=d.getParent(),g=this.isNeedCover();g?(c=getElementById(this.conf.fadeCoverId),this._opacity=.6,this.setopacity(c,this._opacity),QZFL.dom.setStyle(c,"display","")):f.removeClass(this.conf.activeClass),e.css("backgroundColor",d.css("backgroundColor")),e.css("backgroundImage",d.css("backgroundImage")),d.css("backgroundColor",b),d.css("backgroundImage","url("+a+")"),g?this.fadeUp(c):f.addClass(this.conf.activeClass)},changeTitle:function(a,b){if(QZFL.lang.isString(a)&&0!=a.length&&QZFL.lang.isString(b)){var c=getElementById(this.conf.modTitle);QZFL.lang.isElement(c)&&(c.setAttribute("href",a),1==$e(c).find("span").size()?$e(c).find("span").text(b):c.innerText?c.innerText=b:c.textContent=b,b=QZFL.string.filterAngAndQt(b),c.setAttribute("title",b))}},changeNavBgColor:function(a){var b=$j("#"+this.conf.modNav),c=b.css("backgroundImage")||"",d=this.colorCache[a]||{},e=b.get(0);if("filters"in e)try{d.startColorstr=d.startColorstr||this.msColor(a,0),d.endColorstr=d.endColorstr||this.msColor(a,.99),e.filters(0).startColorstr=d.startColorstr,e.filters(0).endColorstr=d.endColorstr}catch(f){}else c.indexOf("gradient")>0?(d.bgimg=d.bgimg||this.colorRgb(a,.2).replace(/0.2\)/,""),c=c.replace(/rgba\(\d{1,3}\,\s*\d{1,3}\,\s*\d{1,3}\,/g,d.bgimg),b.css("backgroundImage",c)):$j(".mod_focus_channel .focus_nav").css({"background-color":a})},preLoadImg:function(a){if(!isNaN(a)&&0!=this.conf.preLoadImgNum)for(var b=a+1,c=a+this.conf.preLoadImgNum,d=this,e=$e("#"+this.conf.modNav).find("li a");c>=b;b++)this.hadLoad[b]||this.loadImg(e.attr("data-pic"),function(){d.hadLoad[b]=!0})},loadImg:function(a,b){function c(){e||(e=!0,d.onerror=null,d.onload=null,delete d,d=null,b())}if(QZFL.lang.isString(a)){var d=document.createElement("img"),e=!1;b=QZFL.lang.isFunction(b)?b:QZFL.emptyFn,d.onload=d.onerror=c,d.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||b()},d.src=a}},fadeUp:function(a){var b=this;this._opacity>0?(clearTimeout(this.fadeUpTimer),this.setopacity(a,this._opacity-.1),this.fadeUpTimer=setTimeout(function(){b.fadeUp(a)},this.conf.fadeUpInterval)):a.style.display="none"},setopacity:function(a,b){"undefined"!=typeof a.style.opacity?a.style.opacity=b:"undefined"!=typeof a.style.MozOpacity?a.style.MozOpacity=b:Live.userAgent.ie&&(a.style.filter="alpha(opacity="+100*b+")"),this._opacity=b}},Live.txv.IndexFocus=function(){var a={smallPicBlock:{showCnt:8,items:$e("#mod_txv_focus_nav").find("li"),playRight:$e("#focus_smaillPic_next"),playLeft:$e("#focus_smaillPic_prev")},focusPicBlock:{autoplayDur:4e3,onChange:function(a){c.show(Math.floor(a/c.config.showCnt)),QZFL.lang.isFunction(d.onChange)&&d.onChange(a)}}},b=new txv.FocusSlider,c=new Live.SimpleImgShow,d=this;this.init=function(d){d=d||{},QZFL.extend(a.smallPicBlock,d.smallPicBlock),QZFL.extend(a.focusPicBlock,d.focusPicBlock),c.init(a.smallPicBlock),b.init(a.focusPicBlock)},this.stop=function(){b.stop()},this.play=function(){b.starAutoPlay(b.curIndex+1)},this.onChange=QZFL.emptyFn,this.setCanPlay=function(a){b.setCanPlay(a)}};/*  |xGv00|e3e7d1f10f2912dbc93f8353f85059b6 */